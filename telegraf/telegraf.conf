# Telegraf Configuration for TrueNAS Docker Infrastructure
# Metrics forwarding to InfluxDB v2

[agent]
  interval = "${TELEGRAF_INTERVAL}"
  hostname = "${TELEGRAF_HOSTNAME}"
  flush_interval = "10s"
  flush_jitter = "5s"

###############################################################################
#                            OUTPUT PLUGINS                                   #
###############################################################################

[[outputs.influxdb_v2]]
  urls = ["${INFLUX_URL}"]
  token = "${INFLUX_TOKEN}"
  organization = "${INFLUX_ORG}"
  bucket = "${INFLUX_BUCKET}"
  timeout = "5s"

###############################################################################
#                            INPUT PLUGINS                                    #
###############################################################################

# Docker Container Metrics
[[inputs.docker]]
  endpoint = "unix:///var/run/docker.sock"
  timeout = "5s"
  docker_label_include = []
  docker_label_exclude = []

# CPU Metrics
[[inputs.cpu]]
  percpu = true
  totalcpu = true
  collect_cpu_time = false
  report_active = false

# Memory Metrics
[[inputs.mem]]

# Disk Metrics
[[inputs.disk]]
  ignore_fs = ["tmpfs", "devtmpfs", "overlay", "squashfs", "iso9660"]

# System Metrics (load, uptime, etc.)
[[inputs.system]]

# Disk I/O Metrics
[[inputs.diskio]]

# Network Interface Metrics
[[inputs.net]]
  interfaces = ["eth*", "enp*", "ens*"]

# Process Metrics
[[inputs.processes]]

# Kernel Metrics
[[inputs.kernel]]
